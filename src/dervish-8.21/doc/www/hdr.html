<HTML>
<COMMENT ************************************************************></COMMENT>
<COMMENT *                                            
<COMMENT * PRODUCT:       Dervish
<COMMENT * 
<COMMENT * ABSTRACT:      Description of "Pure C" header routines for WWW
<COMMENT *
<COMMENT * ENVIRONMENT:   HTML (Hyper Text Markup Language)
<COMMENT *                hdr.html
<COMMENT *
<COMMENT * AUTHOR:        Vijay Gurbani, Creation date: 05/20/93
<COMMENT *
<COMMENT ************************************************************></COMMENT>

<TITLE>Header C Routines</TITLE>
<H1>"Pure C" Layer Routines for Headers</H1>
<P>
Headers can be associated with regions, masks, Binary Tables, etc.  They
describe those entities characteristics.
The headers are similar to FITS headers, but should not be thought of such.
A header vector can contain up to three fields: a keyword field (required), a
value field (required) and a comment field (optional). The following collection
of routines manipulate the header in various ways. A description of each
routine follows.

<DIR>
<LI><A HREF=hdr.html#shHdrNew>shHdrNew</A>
<LI><A HREF=hdr.html#shHdrDel>shHdrDel</A>
<LI><A HREF=hdr.html#shHdrGetAscii>shHdrGetAscii</A>
<LI><A HREF=hdr.html#shHdrGetDbl>shHdrGetDbl</A>
<LI><A HREF=hdr.html#shHdrGetInt>shHdrGetInt</A>
<LI><A HREF=hdr.html#shHdrGetLogical>shHdrGetLogical</A>
<LI><A HREF=hdr.html#shHdrGetLine>shHdrGetLine</A>
<LI><A HREF=hdr.html#shHdrGetLineCont>shHdrGetLineCont</A>
<LI><A HREF=hdr.html#shHdrGetLineno>shHdrGetLineno</A>
<LI><A HREF=hdr.html#shHdrDelByLine>shHdrDelByLine</A>
<LI><A HREF=hdr.html#shHdrDelByKeyword>shHdrDelByKeyword</A>
<LI><A HREF=hdr.html#shHdrInsertLine>shHdrInsertLine</A>
<LI><A HREF=hdr.html#shHdrReplaceLine>shHdrReplaceLine</A>
<LI><A HREF=hdr.html#shHdrInsertLogical>shHdrInsertLogical</A>
<LI><A HREF=hdr.html#shHdrInsertDbl>shHdrInsertDbl</A>
<LI><A HREF=hdr.html#shHdrInsertInt>shHdrInsertInt</A>
<LI><A HREF=hdr.html#shHdrInsertInt>shHdrInsertInt</A>
<LI><A HREF=hdr.html#shHdrInsertAscii>shHdrInsertAscii</A>
<LI><A HREF=hdr.html#shHdrMakeLineWithDbl>shHdrMakeLineWithDbl</A>
<LI><A HREF=hdr.html#shHdrMakeLineWithAscii>shHdrMakeLineWithAscii</A>
<LI><A HREF=hdr.html#shHdrMakeLineWithInt>shHdrMakeLineWithInt</A>
<LI><A HREF=hdr.html#shHdrMakeLineWithLogical>shHdrMakeLineWithLogical</A>
<LI><A HREF=hdr.html#shHdrCopy>shHdrCopy</A>
</DIR>
<PRE></PRE>

<H2><A NAME="shHdrNew">shHdrNew</A></H2>
<P>
This routine will return a pointer to a new header structure.  The header
vector is also malloced, but the header lines are not.

<LISTING>
C SYNTAX:
   HDR *shHdrNew()

RETURNS:
   Pointer to a new header - on success
   NULL - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrDel">shHdrDel</A></H2>
<P>
This routine will free the header passed to it.  The header lines themselves, 
the header vector and the header structure are all freed.

<LISTING>
C SYNTAX:
   void shHdrDel
   (
   HDR  *a_hdr    /* IN: pointer to header to free */
   )

RETURNS:
   NONE
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetAscii">shHdrGetAscii</A></H2>
<P>
This routine retrieves an alphanumeric keyword string from a header.
The calling program provides it a header pointer and a keyword to search
on. The resulting value is placed in a buffer allocated by the user that must
be large enough to hold it. It is the calling routine's responsibility to
ensure that the result buffer is indeed large enough.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetAscii
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   char         *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetDbl">shHdrGetDbl</A></H2>
<P>
This routine retrieves a double value from a header. The calling
program provides it a header pointer and the keyword to search on.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetDbl
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   double       *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetInt">shHdrGetInt</A></H2>
<P>
This routine retrieves an integer value from a header. The calling
program provides it a header pointer and the keyword to search on.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetInt
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   int          *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>


<H2><A NAME="shHdrGetLogical">shHdrGetLogical</A></H2>
<P>
This routine retrieves a logical (1 or 0) value from a header. The 
calling program provides it a header pointer and the keyword to search on.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetLogical
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   int          *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetLine">shHdrGetLine</A></H2>
<P>
This routine retrieves a line from the header identified by the given 
keyword. The calling program provides it a header pointer and the keyword to 
search on.The resulting line is placed in a buffer that must be large enough 
to hold it. It is the calling routine's responsibility to ensure that the
result buffer is indeed large enough.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetLine
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   char         *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetLineCont">shHdrGetLineCont</A></H2>
<P>
This routine retrieves a line from the header identified by the given 
line number. The calling program provides it a header pointer and the line
number to search on.  The resulting line is placed in a buffer that must be
large enough to hold it. It is the calling routine's responsibility to ensure
that the result buffer is indeed large enough.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetLineCont
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   int          *a_line,     /* IN: Line num to search for in header vector */
   char         *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrGetLineno">shHdrGetLineno</A></H2>
<P>
This routine retrieves the line number in the header where the specified
keyword was found. The calling program provides it a header pointer and the 
keyword to search on.

<LISTING>
C SYNTAX:
   RET_CODE shHdrGetLineno
   (
   const HDR    *a_hdr,      /* IN: Header pointer */
   const char   *a_keyword,  /* IN: Keyword to search for in header vector */
   int          *a_dest      /* OUT: pointer to result buffer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrDelByLine">shHdrDelByLine</A></H2>
<P>
This routine deletes the requested line number from the header.

<LISTING>
C SYNTAX:
   RET_CODE shHdrDelByLine
   ( 
   HDR    *a_hdr,        /* MOD: Header pointer */
   const  int a_lineNo   /* IN: line number to be deleted */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>
   
<H2><A NAME="shHdrDelByKeyword">shHdrDelByKeyword</A></H2>
<P>
This routine deletes a header vector identified by keyword <EM>a_keyword</EM>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrDelByKeyword
   (
   HDR        *a_hdr,      /* MOD: Header pointer */
   const char *a_keyword   /* IN: line to be deleted is identified by this */
   )                       /*     keyword */

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrInsertLine">shHdrInsertLine</A></H2>
<P>
Insert a header vector in a header. If the header vector is null,
memory will be allocated for it.

<LISTING>
C SYNTAX:
   RET_CODE shHdrInsertLine
   (
   HDR    *a_hdr,                /* MOD: Header pointer */
   const  int a_lineNo,          /* IN: Line number after which to insert */
   const  char *a_line           /* IN: Vector to be inserted */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_INSERTION_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrInsertLogical">shHdrInsertLogical</A></H2>
<P>
Insert a logical (0 or 1) value in a header vector. A valid header
vector will be created using the parameters <EM>a_key, a_value,</EM> and <EM>
a_comment</EM> and subsequently inserted in the header vector.
If the header does not have a header vector, one will be created
using <A HREF=hdr.html#shHdrInit>shHdrInit()</A>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrInsertLogical
   (
   HDR        *a_hdr,      /* MOD: Header pointer */
   const char *a_key,      /* IN: Header vector's keyword */
   const int   a_value,    /* IN: Header vector's logical value */
   const char *a_comment   /* IN: Header vector's comment. Can be blank */
   )                       /*     or NULL */

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_INSERTION_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrInsertDbl">shHdrInsertDbl</A></H2>
<P>
Insert a double value in a header vector. A valid header
vector will be created using the parameters <EM>a_key, a_value,</EM> and <EM>
a_comment</EM> and subsequently inserted in the header vector.
If the header does not have a header vector, one will be created
using <A HREF=hdr.html#shHdrInit>shHdrInit()</A>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrInsertDbl
   (
   HDR          *a_hdr,     /* MOD: Header pointer */
   const char   *a_key,     /* IN: Header vector's keyword */
   const double  a_value,   /* IN: Header vector's double value */
   const char   *a_comment  /* IN: Header vector's comment. Can be blank */
   )                        /*     or NULL */

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_INSERTION_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrInsertInt">shHdrInsertInt</A></H2>
<P>
Insert an integer value in a header vector. A valid header
vector will be created using the parameters <EM>a_key, a_value,</EM> and <EM>
a_comment</EM> and subsequently inserted in the header vector.
If the header does not have a header vector, one will be created
using <A HREF=hdr.html#shHdrInit>shHdrInit()</A>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrInsertInt
   (
   HDR        *a_hdr,     /* MOD: Header pointer */
   const char *a_key,     /* IN: Header vector's keyword */
   const int   a_value,   /* IN: Header vector's integer value */
   const char *a_comment  /* IN: Header vector's comment. Can be blank */
   )                      /*     or NULL */

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_INSERTION_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrInsertAscii">shHdrInsertAscii</A></H2>
<P>
Insert a line in a header vector. A valid header vector will be 
created using the parameters <EM>a_key, a_value,</EM> and <EM> a_comment</EM> 
and subsequently inserted in the header vector. If the header does 
not have a header vector, one will be created using
<A HREF=hdr.html#shHdrInit>shHdrInit()</A>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrInsertAscii
   (
   HDR        *a_hdr,     /* MOD: Header pointer */
   const char *a_key,     /* IN: Header vector's keyword */
   const char *a_value,   /* IN: Header vector's ASCII value */
   const char *a_comment  /* IN: Header vector's comment. Can be blank */
   )                      /*     or NULL */

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_INSERTION_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrMakeLineWithDbl">shHdrMakeLineWithDbl</A></H2>
<P>
Constructs a line suitable for inclusion into a header. Uses
<EM>a_keyword, a_value,</EM> and <EM>a_comment</EM> to construct a valid
line containing double data. Stores the constructed line in <EM>a_dest</EM>.
It is the calling function's responsibility to ensure that <EM>a_dest</EM>
is big enough to hold the constructed line.

<LISTING>
C SYNTAX:
   void shHdrMakeLineWithDbl
   (
   const char   *a_keyword,   /* IN: Pointer to the keyword */
   const double a_value,      /* IN: Data to be inserted in the header */
   const char   *a_comment,   /* IN: Header vector's comment. Can be blank */
                              /*     or NULL */
   char         *a_dest       /* OUT: Pointer to buffer where the */
   )                          /*      constructed line is stored */

RETURNS:
   Nothing
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrMakeLineWithAscii">shHdrMakeLineWithAscii</A></H2>
<P>
Constructs a line suitable for inclusion into a header. Uses
<EM>a_keyword, a_value,</EM> and <EM>a_comment</EM> to construct a valid
line containing Ascii (alphanumeric) data. Stores the constructed line in 
<EM>a_dest</EM>. It is the calling function's responsibility to ensure 
that <EM>a_dest</EM> is big enough to hold the constructed line.

<LISTING>
C SYNTAX:
   void shHdrMakeLineWithAscii
   (
   const char   *a_keyword,   /* IN: Pointer to the keyword */
   const char   *a_value,     /* IN: Data to be inserted in the header */
   const char   *a_comment,   /* IN: Header vector's comment. Can be blank */
                              /*     or NULL */
   char         *a_dest       /* OUT: Pointer to buffer where the */
   )                          /*      constructed line is stored */

RETURNS:
   Nothing
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrMakeLineWithInt">shHdrMakeLineWithInt</A></H2>
<P>
Constructs a line suitable for inclusion into a header. Uses
<EM>a_keyword, a_value,</EM> and <EM>a_comment</EM> to construct a valid
line containing integer data. Stores the constructed line in <EM>a_dest</EM>.
It is the calling function's responsibility to ensure that <EM>a_dest</EM>
is big enough to hold the constructed line.

<LISTING>
C SYNTAX:
   void shHdrMakeLineWithInt
   (
   const char   *a_keyword,   /* IN: Pointer to the keyword */
   const int    a_value,      /* IN: Data to be inserted in the header */
   const char   *a_comment,   /* IN: Header vector's comment. Can be blank */
                              /*     or NULL */
   char         *a_dest       /* OUT: Pointer to buffer where the */
   )                          /*      constructed line is stored */

RETURNS:
   Nothing
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrMakeLineWithLogical">shHdrMakeLineWithLogical</A></H2>
<P>
Constructs a line suitable for inclusion into a header. Uses
<EM>a_keyword, a_value,</EM> and <EM>a_comment</EM> to construct a valid
line containing logical (0 or 1) data. Stores the constructed line in 
<EM>a_dest</EM>. It is the calling function's responsibility to ensure 
that <EM>a_dest</EM> is big enough to hold the constructed line.

<LISTING>
C SYNTAX:
   void shHdrMakeLineWithLogical
   (
   const char   *a_keyword,   /* IN: Pointer to the keyword */
   const int    a_value,      /* IN: Data to be inserted in the header */
   const char   *a_comment,   /* IN: Header vector's comment. Can be blank */
                              /*     or NULL */
   char         *a_dest       /* OUT: Pointer to buffer where the */
   )                          /*      constructed line is stored */

RETURNS:
   Nothing
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrReplaceLine">shHdrReplaceLine</A></H2>
<P>
Replace, in the header, line <EM>a_lineNo</EM> by the contents of
<EM>a_line</EM>.

<LISTING>
C SYNTAX:
   RET_CODE shHdrReplaceLine
   (
   HDR    *a_hdr,        /* MOD: Header pointer */
   const  int a_lineNo,  /* IN: line number on which to insert */
   const  char *a_line   /* IN: pointer to the line to be inserted */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL - if the header is null
   SH_GENERIC_ERROR - otherwise
</LISTING>
<PRE></PRE>

<H2><A NAME="shHdrCopy">shHdrCopy</A></H2>
<P>
This routine copies a header from <EM>a_inReg</EM> to <EM>a_outReg</EM>. It
runs standard checks that include ensuring that <EM>a_inReg</EM>'s header is
non null, creating a header for <EM>a_outReg</EM> if one does not already
exist (using <A HREF=hdr.html#shHdrMallocForVec>shHdrMallocForVec()</A>).
If a header for <EM>a_outReg</EM> exists, this routine will deallocate
it.

<LISTING>
C SYNTAX:
   RET_CODE shHdrCopy
   (
   const  HDR   *a_inHdr,    /* IN: Input (source) header pointer */
          HDR   *a_outHdr    /* MOD: Output (destination) header pointer */
   )

RETURNS:
   SH_SUCCESS - on success
   SH_HEADER_IS_NULL -  if source header pointer is null
</LISTING>
<PRE></PRE>

</HTML>
